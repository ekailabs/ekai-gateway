{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Transformed Model Schema v2",
  "type": "object",
  "properties": {
    "all_models": {
      "type": "array",
      "items": {
        "type": "string"
      }
    }
  },
  "patternProperties": {
    "^(?!all_models$)[a-zA-Z0-9._-]+$": {
      "type": "object",
      "properties": {
        "providers": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "common": {
          "type": "object",
          "properties": {
            "modalities": {
              "$ref": "#/$defs/modalities"
            },
            "capabilities": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "context_window": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0
            },
            "max_output_tokens": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0
            },
            "reasoning": {
              "type": [
                "boolean",
                "null"
              ]
            }
          },
          "required": [
            "modalities",
            "capabilities"
          ]
        }
      },
      "patternProperties": {
        "^(openai|openrouter|anthropic|xai)$": {
          "type": "object",
          "properties": {
            "snapshots": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "training_data_cutoff": {
              "type": [
                "string",
                "null"
              ]
            },
            "endpoints": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "rate_limits": {
              "$ref": "#/$defs/rate_limits"
            },
            "pricing": {
              "$ref": "#/$defs/pricing"
            }
          },
          "required": [
            "snapshots",
            "training_data_cutoff",
            "endpoints",
            "rate_limits",
            "pricing"
          ]
        }
      },
      "required": [
        "providers",
        "common"
      ]
    }
  },
  "$defs": {
    "modalities": {
      "type": "object",
      "properties": {
        "input": {
          "type": "object",
          "properties": {
            "text": {
              "type": "boolean"
            },
            "image": {
              "type": "boolean"
            },
            "audio": {
              "type": "boolean"
            }
          },
          "required": [
            "text",
            "image",
            "audio"
          ]
        },
        "output": {
          "type": "object",
          "properties": {
            "text": {
              "type": "boolean"
            },
            "image": {
              "type": "boolean"
            },
            "audio": {
              "type": "boolean"
            }
          },
          "required": [
            "text",
            "image",
            "audio"
          ]
        }
      },
      "required": [
        "input",
        "output"
      ]
    },
    "rate_limits": {
      "type": "object",
      "properties": {
        "tiers": {
          "type": "object",
          "properties": {
            "free": {
              "$ref": "#/$defs/rate_tier"
            },
            "tier_1": {
              "$ref": "#/$defs/rate_tier"
            },
            "tier_2": {
              "$ref": "#/$defs/rate_tier"
            },
            "tier_3": {
              "$ref": "#/$defs/rate_tier"
            },
            "tier_4": {
              "$ref": "#/$defs/rate_tier"
            },
            "tier_5": {
              "$ref": "#/$defs/rate_tier"
            }
          }
        },
        "generic_limits": {
          "type": "object",
          "properties": {
            "rpm": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0
            },
            "tpm": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0
            }
          }
        }
      }
    },
    "rate_tier": {
      "type": "object",
      "properties": {
        "rpm": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        },
        "tpm": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        },
        "batch_queue_limit": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        }
      }
    },
    "pricing": {
      "type": "object",
      "properties": {
        "text_per_MTok": {
          "type": "object",
          "properties": {
            "batch": {
              "$ref": "#/$defs/textPricing"
            },
            "flex": {
              "$ref": "#/$defs/textPricing"
            },
            "standard": {
              "allOf": [
                {
                  "$ref": "#/$defs/textPricing"
                },
                {
                  "properties": {
                    "cache_writes_5m": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0
                    },
                    "cache_writes_1h": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0
                    },
                    "cache_hits_refreshes": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0
                    }
                  }
                }
              ]
            },
            "priority": {
              "$ref": "#/$defs/textPricing"
            }
          }
        },
        "image_per_MTok": {
          "$ref": "#/$defs/textPricing"
        },
        "audio_per_MTok": {
          "$ref": "#/$defs/textPricing"
        },
        "fine_tuning_per_MTok": {
          "type": "object",
          "properties": {
            "batch": {
              "type": "object",
              "properties": {
                "training": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "input": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "cached_input": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "output": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                }
              }
            },
            "standard": {
              "type": "object",
              "properties": {
                "training": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "input": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "cached_input": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "output": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                }
              }
            }
          }
        },
        "embeddings_per_MTok": {
          "type": "object",
          "properties": {
            "cost": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "batch_cost": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            }
          }
        },
        "legacy_models_per_MTok": {
          "type": "object",
          "properties": {
            "batch": {
              "type": "object",
              "properties": {
                "input": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "output": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                }
              }
            },
            "standard": {
              "type": "object",
              "properties": {
                "input": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "output": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                }
              }
            }
          }
        },
        "per_image": {
          "type": [
            "number",
            "null"
          ],
          "minimum": 0
        },
        "feature_specific": {
          "type": "object",
          "properties": {
            "batch_processing": {
              "type": "object",
              "properties": {
                "input": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "output": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                }
              }
            },
            "long_context": {
              "type": "object",
              "properties": {
                "<=200k_input": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "<=200k_output": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                ">200k_input": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                ">200k_output": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                }
              }
            },
            "tool_use": {
              "type": "object",
              "properties": {
                "auto_none": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "any_tool": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                }
              }
            }
          }
        },
        "tools": {
          "type": "object",
          "properties": {
            "code_interpreter": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "file_search_storage": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "file_search_call": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "web_search": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "web_search_preview": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "mcp_connector": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "bash": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "code_execution": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "computer_use": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "text_editor": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "web_fetch": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "livesearch": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            }
          }
        }
      }
    },
    "textPricing": {
      "type": "object",
      "properties": {
        "input": {
          "type": [
            "number",
            "null"
          ],
          "minimum": 0
        },
        "cached_input": {
          "type": [
            "number",
            "null"
          ],
          "minimum": 0
        },
        "output": {
          "type": [
            "number",
            "null"
          ],
          "minimum": 0
        }
      }
    }
  }
}